(function(api){api.controlConstructor['typography']=api.Control.extend({ready:function(){const control=this;const controlClass='.customize-control-typography';const footerActions=jQuery('#customize-footer-actions');jQuery(control.selector+' .ogf-device-controls > div').on('click',function(event){console.log(event);var device=jQuery(this).data('option');wp.customize.previewedDevice.set(device);jQuery(controlClass+' .ogf-device-controls div').each(function(){var _this=jQuery(this);if(device===_this.attr('data-option')){_this.addClass('selected');_this.siblings().removeClass('selected');}});});footerActions.find('.devices button').on('click',function(){var device=jQuery(this).data('device');jQuery(controlClass+' .ogf-device-controls div').each(function(){var _this=jQuery(this);if(device===_this.attr('data-option')){_this.addClass('selected');_this.siblings().removeClass('selected');}});});function addGoogleFont(fontName){const font=ogf_font_array[fontName];const weights=jQuery.map(font.v,function(value,key){return key;});const weightsURL=weights.join(',');const fontURL=font.f.replace(/ /g,'+')+':'+weightsURL;wp.customize.previewer.send('olympusFontURL','<link href=\'https://fonts.googleapis.com/css?family='+fontURL+'\' rel=\'stylesheet\' type=\'text/css\'>');}
function isSystemFont(fontID){if(fontID.indexOf('sf-')!==-1){return true;}
return false;}
function isTypekitFont(fontID){if(fontID.indexOf('tk-')!==-1){return true;}
return false;}
function isCustomFont(fontID){if(fontID.indexOf('cf-')!==-1){return true;}
return false;}
control.container.on('change','.typography-font-family select',function(){const value=jQuery(this).val();control.settings.family.set(value);const weightsSelect=jQuery('.typography-font-weight select');if(value==='default'||isSystemFont(value)||isCustomFont(value)){const defaultWeights={0:"- Default -",400:"Normal",700:"Bold",}
weightsSelect.empty();jQuery.each(defaultWeights,function(key,val){weightsSelect.append(jQuery('<option></option>').attr('value',key).text(val));});}else if(isTypekitFont(value)){const font=ogf_typekit_fonts[value];const newWeights=font.variants;newWeights.unshift("0");var finalWeights=new Object();newWeights.forEach(function(i){finalWeights[i]=ogf_font_variants[i];});const weightsSelect=jQuery('.typography-font-weight select');weightsSelect.empty();jQuery.each(finalWeights,function(key,val){weightsSelect.append(jQuery('<option></option>').attr('value',key).text(val));});}else{addGoogleFont(value);const font=ogf_font_array[value];const newWeights=font.v;newWeights[0]="0";var finalWeights=new Object();for(var i in newWeights){finalWeights[i]=ogf_font_variants[i];}
const weightsSelect=jQuery('.typography-font-weight select');weightsSelect.empty();jQuery.each(finalWeights,function(key,val){weightsSelect.append(jQuery('<option></option>').attr('value',key).text(val));});}});control.container.on('click','.advanced-button',function(){jQuery(this).toggleClass('open');jQuery(this).parent().next('.advanced-settings-wrapper').toggleClass('show');});const picker=this.container.find('.typography-font-color .color-picker-hex');picker.wpColorPicker({width:225,change:function(){setTimeout(function(){control.settings.color.set(picker.val());},100);},clear:function(){control.settings.color.set(picker.val());},});jQuery('.ogf-select',control.container).chosen({width:'85%'});jQuery('.slider-custom-control').each(function(){const sliderValue=jQuery(this).find('.customize-control-slider-value').val();const newSlider=jQuery(this).find('.slider');const sliderMinValue=parseFloat(newSlider.attr('slider-min-value'));const sliderMaxValue=parseFloat(newSlider.attr('slider-max-value'));const sliderStepValue=parseFloat(newSlider.attr('slider-step-value'));newSlider.slider({value:sliderValue,min:sliderMinValue,max:sliderMaxValue,step:sliderStepValue,slide:function(){jQuery(this).parent().find('.customize-control-slider-value').trigger('change');},});});jQuery('.slider').on('slide',function(event,ui){jQuery(this).parent().find('.customize-control-slider-value').val(ui.value);});jQuery('.slider-reset').on('click',function(){const resetValue=jQuery(this).attr('slider-reset-value');jQuery(this).parent().find('.customize-control-slider-value').val(resetValue);jQuery(this).parent().find('.customize-control-slider-value').trigger('change');jQuery(this).parent().find('.slider').slider('value',resetValue);});jQuery('.customize-control-slider-value').blur(function(){let resetValue=jQuery(this).val();const slider=jQuery(this).parent().find('.slider');const sliderMinValue=parseInt(slider.attr('slider-min-value'));const sliderMaxValue=parseInt(slider.attr('slider-max-value'));if(resetValue<sliderMinValue){resetValue=sliderMinValue;jQuery(this).val(resetValue);}
if(resetValue>sliderMaxValue){resetValue=sliderMaxValue;jQuery(this).val(resetValue);}
jQuery(this).parent().find('.slider').slider('value',resetValue);});},embed:function(){const control=this;const sectionId=control.section();if(!sectionId){return;}
wp.customize.section(sectionId,function(section){section.expanded.bind(function(expanded){if(expanded){control.actuallyEmbed();}});});},actuallyEmbed:function(){const control=this;if('resolved'===control.deferred.embedded.state()){return;}
control.renderContent();control.deferred.embedded.resolve();},});wp.customize.control('ogf_reset_fonts',function(control){control.container.find('.button').on('click',function(event){event.preventDefault();const data={wp_customize:'on',action:'customizer_reset',security:fontsReset.nonce,};const confirmReset=confirm(fontsReset.confirm);if(!confirmReset){return;}
jQuery(this).attr('disabled','disabled');jQuery.post(ajaxurl,data,function(result){wp.customize.state('saved').set(true);location.reload();});});});}(wp.customize));jQuery(document).ready(function(){jQuery('.customize-multiple-checkbox-control input[type="checkbox"]').on('change',function(){const checkboxValues=jQuery(this).parents('.customize-control').find('input[type="checkbox"]:checked').map(function(){return this.value;}).get().join(',');jQuery(this).parents('.customize-control').find('input[type="hidden"]').val(checkboxValues).trigger('change');});});(function(api){api.controlConstructor['typography-multiselect']=api.Control.extend({ready:function(){const control=this;jQuery('.ogf-select',control.container).chosen({width:'85%'});jQuery('select',control.container).change(function(){let selectValue=jQuery(this).val();selectValue=(null===selectValue)?[]:selectValue;control.setting.set(selectValue);});},});}(wp.customize));(function($){wp.customize('fpp_use_woff2',function(use_woff2){use_woff2.bind(function(value){if(true==value){$('#customize-control-fpp_preloading').hide();}else{$('#customize-control-fpp_preloading').show();}});});})(jQuery);